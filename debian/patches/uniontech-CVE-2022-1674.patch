Index: vim/src/buffer.c
===================================================================
--- vim.orig/src/buffer.c
+++ vim/src/buffer.c
@@ -2863,7 +2863,7 @@ buflist_match(
 
     // First try the short file name, then the long file name.
     match = fname_match(rmp, buf->b_sfname, ignore_case);
-    if (match == NULL)
+    if (match == NULL && rmp->regprog != NULL)
 	match = fname_match(rmp, buf->b_ffname, ignore_case);
 
     return match;
Index: vim/src/testdir/test_buffer.vim
===================================================================
--- vim.orig/src/testdir/test_buffer.vim
+++ vim/src/testdir/test_buffer.vim
@@ -435,6 +435,10 @@ func Test_buf_pattern_invalid()
   vsplit 0000000
   silent! buf [0--]\&\zs*\zs*e
   bwipe!
+
+  vsplit 00000000000000000000000000
+  silent! buf [0--]\&\zs*\zs*e
+  bwipe!
 endfunc
 
 " vim: shiftwidth=2 sts=2 expandtab
